{namespace form=TYPO3\Form\ViewHelpers}
<f:layout name="TYPO3.Form:Field" />
<f:section name="field">
	<form:form.uploadedResource property="{element.identifier}.originalResource" as="resourceObj">
		{resourceObj -> f:debug()}
		<div id="{property}-uploadfields" class="b-form-inputs"{f:if(condition:resourceObj, then: ' style="display:none"')}>
			<f:form.upload property="{property}.originalResource" id="{property}" />
			<f:if condition="{resourceObj}">
				<a href="#" onclick="return !disableUpload()">Cancel</a>
			</f:if>
		</div>
		<f:if condition="{resourceObj}">
			<div id="{property}-preview" class="b-form-inputs">
				<a href="{f:uri.resource(resource: resourceObj)}" rel="lytebox">
					<img src="{f:uri.resource(resource: resourceObj)}" alt="{label}" style="width: 150px;" />
				</a>
				<a href="#" onclick="return !enableUpload()">Replace Image</a>
			</div>
		</f:if>
		<script type="text/javascript">
			var hasResource = {f:if(condition: resourceObj, then: 'true', else: 'false')};
			var property = '{property}';
		//<![CDATA[
			function enableUpload() {
				document.getElementById(property + '-preview').style.display = 'none';
				document.getElementById(property + '-uploadfields').style.display = 'block';
				return true;
			}
			function disableUpload() {
				document.getElementById(property + '-preview').style.display = 'block';
				document.getElementById(property + '-uploadfields').style.display = 'none';
				return true;
			}
		//]]></script>
		</form:form.uploadedResource>
</f:section>